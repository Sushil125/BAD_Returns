<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bad Returns</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f1f3f7;
        margin: 0;
        padding: 20px;
        color: #333;
    }
    h1 {
        text-align: center;
        margin-bottom: 18px;
        font-size: 24px;
        color: #222;
    }
    .container {
        max-width: 820px;
        margin: auto;
        background: white;
        padding: 20px 24px;
        border-radius: 10px;
        box-shadow: 0 4px 18px rgba(0,0,0,0.08);
    }
    label {
        font-weight: 600;
        margin-top: 8px;
        display: block;
        font-size: 13px;
    }
    input[type="text"], select, textarea {
        width: 100%;
        padding: 8px 10px;
        border: 1px solid #c3c7cc;
        border-radius: 7px;
        font-size: 13px;
        margin-top: 6px;
        margin-bottom: 10px;
        background: #fafafa;
        box-sizing: border-box;
    }
    .checkbox-group label {
        font-weight: 500;
        font-size: 13px;
        margin-bottom: 4px;
        padding: 2px 0;
        display: block;
    }
    .indent {
        margin-left: 18px;
        padding-left: 10px;
        border-left: 2px solid #e6e6e6;
        margin-top: 6px;
        margin-bottom: 6px;
    }
    .hidden { display: none; }
    .row {
        display: flex;
        gap: 10px;
        align-items: center;
    }
    .col {
        flex: 1;
    }
    button {
        background: #4a8df6;
        color: white;
        border: none;
        padding: 8px 14px;
        border-radius: 7px;
        font-size: 13px;
        cursor: pointer;
        margin-right: 8px;
        margin-top: 8px;
    }
    #copyButton { background: #28a745; }
    #copyButton:hover { background: #1f7a36; }
    button:hover { filter: brightness(0.95); }
    textarea {
        height: 85px;
        min-height: 55px;
        max-height: 240px;
        resize: vertical;
        background: #fafafa;
        border-radius: 6px;
        padding: 8px 10px;
        font-size: 13px;
    }

    /* floating RedPhone button */
    .side-link {
        position: fixed;
        top: 20px;
        right: 22px;
        background: #4a8df6;
        color: white;
        padding: 10px 16px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        box-shadow: 0 4px 14px rgba(0,0,0,0.18);
        z-index: 9999;
        transition: transform .12s ease, background .12s ease;
    }
    .side-link:hover { transform: translateY(-3px); background: #3b7be0; }

    .small {
        font-size: 12px;
        color: #666;
    }

    .inline-inputs {
        display: grid;
        grid-template-columns: 1fr 1fr 140px;
        gap: 10px;
        margin-top: 6px;
    }

    @media (max-width: 700px) {
        .inline-inputs { grid-template-columns: 1fr; }
        .side-link { right: 10px; top: 10px; padding: 8px 12px; font-size: 13px; }
    }
</style>
</head>
<body>

<a href="https://lossprevention.amazon.com/redphone_cases" target="_blank" class="side-link">RedPhone Cases</a>

<h1>Bad Returns</h1>

<div class="container">
    <label for="itemName">Item Name:</label>
    <input type="text" id="itemName">

    <label for="asin">ASIN:</label>
    <input type="text" id="asin">

    <label for="price">Price:</label>
    <input type="text" id="price">

    <label for="orderInitiated">Order Initiated:</label>
    <input type="text" id="orderInitiated">

    <label for="returnInitiated">Return Initiated:</label>
    <input type="text" id="returnInitiated">

    <label for="customerComment">Customer Comment:</label>
    <input type="text" id="customerComment">

    <div class="checkbox-group">
        <label><input type="checkbox" id="beyondUse"> Beyond Acceptable Use</label>

        <label><input type="checkbox" id="outOfWarranty"> Out of Warranty</label>
        <div id="warrantyOptions" class="indent hidden">
            <label for="warrantyPeriod">Warranty Period (years):</label>
            <input type="text" id="warrantyPeriod">
        </div>

        <label><input type="checkbox" id="packageSwapped"> Package Contents Swapped</label>
        <div id="packageSwappedOptions" class="indent hidden">
            <label><input type="checkbox" id="differentSerialNumber"> Different Serial Number
			</label>
			
			<div id="differentSerialNumberInline" class="indent hidden">
			<div class="small">Provide Details:</div>
			<div class="inline-inputs">
			<input type="text" id="serialNumber" placeholder="Serial Number on Item">
			<select id="receivedSerialNumber">
			<option value="">Different from the Box?(select)</option>
			<option value="Yes">Yes</option>
			<option value="No">No</option>
			</select>
			</div>
			</div>

            <label>
                <input type="checkbox" id="counterfeit"> Counterfeit (Different Item)
            </label>

            <!-- Inline counterfeit inputs (appear when Counterfeit checked) -->
            <div id="counterfeitInline" class="indent hidden">
                <div class="small">Provide details about the received item:</div>
                <div class="inline-inputs">
                    <input type="text" id="receivedItemName" placeholder="Received item name">
                    <input type="text" id="receivedItemASIN" placeholder="Received ASIN">
                    <select id="receivedItemSellable">
                        <option value="">Sellable? (select)</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
            </div>

            <label><input type="checkbox" id="fakeDevice"> Fake Device</label>
            <label><input type="checkbox" id="junkItems"> Junk Items Returned</label>
        </div>

        <label><input type="checkbox" id="asinPackageMissing"> ASIN Package Contents Missing</label>
        <div id="asinPackageOptions" class="indent hidden">
            <label><input type="checkbox" id="mainItemMissing"> Main Item Missing</label>
            <label><input type="checkbox" id="missingParts"> Missing Parts</label>
            <label><input type="checkbox" id="emptyBox"> Empty Box</label>
        </div>

        <label><input type="checkbox" id="badHistory"> Bad History?</label>
        <div id="badHistoryOptions" class="indent hidden">
            <label for="badHistoryOption">Option:</label>
            <select id="badHistoryOption">
                <option value="none">Select</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>

            <div id="badHistoryCountWrapper" class="indent hidden">
                <label for="badHistoryCount">Total Previous Orders:</label>
                <input type="text" id="badHistoryCount">
            </div>
        </div>

        <label><input type="checkbox" id="receivedRefund"> Received Refund?</label>
        <div id="refundOptions" class="indent hidden">
            <label for="refundOption">Option:</label>
            <select id="refundOption">
                <option value="none">Select</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>

        <label><input type="checkbox" id="receivedExchange"> Received Exchange</label>
    </div>

    <br />
    <div class="row">
        <button onclick="generateMessage()">Update</button>
        <button id="copyButton" onclick="copyToClipboard()">Copy</button>
        <button onclick="clearFields()">Clear</button>
    </div>

    <label for="generatedText" style="margin-top:12px; display:block;">Generated Text:</label>
    <textarea id="generatedText" readonly></textarea>
</div>

<script>
/* Toggle sections */
const toggleList = [
    ["outOfWarranty", "warrantyOptions"],
    ["packageSwapped", "packageSwappedOptions"],
    ["asinPackageMissing", "asinPackageOptions"],
    ["badHistory", "badHistoryOptions"],
    ["receivedRefund", "refundOptions"]
];

toggleList.forEach(([cbId, boxId]) => {
    const cb = document.getElementById(cbId);
    const box = document.getElementById(boxId);
    cb.addEventListener("change", () => {
        box.classList.toggle("hidden", !cb.checked);
    });
});
const differentSerialNumberInlineCheckbox = document.getElementById("differentSerialNumber");
const differentSerialNumberInline = document.getElementById("differentSerialNumberInline");
differentSerialNumberInlineCheckbox.addEventListener("change", () => {
    differentSerialNumberInline.classList.toggle("hidden", !differentSerialNumberInlineCheckbox.checked);
    // clear those fields when unchecked
    if (!differentSerialNumberInlineCheckbox.checked) {
        document.getElementById("serialNumber").value = "";
        document.getElementById("receivedSerialNumber").value = "";
    }
});

/* Counterfeit inline fields show/hide */
const counterfeitCheckbox = document.getElementById("counterfeit");
const counterfeitInline = document.getElementById("counterfeitInline");
counterfeitCheckbox.addEventListener("change", () => {
    counterfeitInline.classList.toggle("hidden", !counterfeitCheckbox.checked);
    // clear those fields when unchecked
    if (!counterfeitCheckbox.checked) {
        document.getElementById("receivedItemName").value = "";
        document.getElementById("receivedItemASIN").value = "";
        document.getElementById("receivedItemSellable").value = "";
    }
});

/* Bad history option toggler */
const badHistoryOption = document.getElementById("badHistoryOption");
badHistoryOption.addEventListener("change", () => {
    const show = badHistoryOption.value === "yes";
    document.getElementById("badHistoryCountWrapper").classList.toggle("hidden", !show);
});

/* Generate message */
function generateMessage() {
    const f = id => document.getElementById(id).value.trim();
    let msg = `Customer ordered ${f("itemName")} [${f("asin")}] priced at $${f("price")} on ${f("orderInitiated")} and started the return on ${f("returnInitiated")}.`;

    if (f("customerComment")) msg += ` Customer comment: ${f("customerComment")}.`;

    if (document.getElementById("beyondUse").checked) {
        msg += " Customer has returned the item in a beyond acceptable use condition, the item is clearly used damaged with dirty stains and marks.";
    }
	if (document.getElementById("outOfWarranty").checked) {
                const warrantyPeriod = document.getElementById("warrantyPeriod").value || "unknown";
                msg += ` This item is also out of warranty, as stated on the Amazon webpage, this item only comes with ${warrantyPeriod} years warranty.`;
            }
	if (document.getElementById("differentSerialNumber").checked) {
                    const rSerial = f("serialNumber") || "unknown serial number";
					const DifferS = document.getElementById("receivedSerialNumber").value;
					let conditionText = "in unknown condition";
					if(DifferS.toLowerCase() === "yes") conditionText =" The serial no. on the item also differs to the one that is listed on the box. The serial number listed on the box is accepted by T-REX, thus the customer has swapped the item out but sent back the original packaging. ";
					else if(DifferS.toLowerCase() === "no") conditionText =" The serial number on the box is also NOT accepted by T-REX. ";
					
					msg += `The serial number listed on the device is ${rSerial} and ${conditionText}`;
                }		
	
	

    // Counterfeit handling (inline)
    if (document.getElementById("counterfeit").checked) {
        const rName = f("receivedItemName") || "unknown item";
        const rAsin = f("receivedItemASIN") || "unknown ASIN";
        const sellable = document.getElementById("receivedItemSellable").value;
        let conditionText = "in unknown condition";
        if (sellable.toLowerCase() === "yes") conditionText = "in good condition";
        else if (sellable.toLowerCase() === "no") conditionText = "in bad condition";

        // short compact sentence as requested
        msg += ` The customer returned a different item. Received item: ${rName} (ASIN ${rAsin}). The received item is ${conditionText}.`;
    }

    if (document.getElementById("fakeDevice").checked) {
        msg += " Customer has returned a fake device.";
    }

    if (document.getElementById("junkItems").checked) {
        msg += " Customer returned junk items.";
    }

    if (document.getElementById("asinPackageMissing").checked) {
        const missingArr = [];
        if (document.getElementById("mainItemMissing").checked) missingArr.push("Main item missing");
        if (document.getElementById("missingParts").checked) missingArr.push("Accessories missing");
        if (document.getElementById("emptyBox").checked) missingArr.push("Empty box returned");
        if (missingArr.length) msg += " " + missingArr.join("; ") + ".";
    }

    if (document.getElementById("badHistory").checked) {
        const totalOrders = f("badHistoryCount") || "unknown";
        if (badHistoryOption.value === "yes") msg += ` Customer has bad return history with ${totalOrders} previous orders.`;
        else if (badHistoryOption.value === "no") msg += " Customer has moderate return history.";
    }

    if (document.getElementById("receivedRefund").checked) {
        const refundOpt = document.getElementById("refundOption").value;
        msg += refundOpt === "yes" ? " Customer has received refund." : " Customer has NOT received refund.";
    }

    if (document.getElementById("receivedExchange").checked) msg += " Customer received an exchange.";

    document.getElementById("generatedText").value = msg;
}

/* Clear all */
function clearFields() {
    document.querySelectorAll("input[type=text]").forEach(el => el.value = "");
    document.querySelectorAll("input[type=checkbox]").forEach(el => el.checked = false);
    document.querySelectorAll("select").forEach(el => el.value = "");
    toggleList.forEach(([cb, box]) => document.getElementById(box).classList.add("hidden"));
    document.getElementById("badHistoryCountWrapper").classList.add("hidden");
    counterfeitInline.classList.add("hidden");
    document.getElementById("generatedText").value = "";
    window.scrollTo({ top: 0, behavior: 'smooth' });
    document.getElementById("copyButton").innerText = "Copy";
}

/* Copy to clipboard */
function copyToClipboard() {
    const area = document.getElementById("generatedText");
    navigator.clipboard.writeText(area.value).then(() => {
        const btn = document.getElementById("copyButton");
        btn.innerText = "Copied!";
        setTimeout(() => btn.innerText = "Copy", 1400);
    });
}
</script>

</body>
</html>
